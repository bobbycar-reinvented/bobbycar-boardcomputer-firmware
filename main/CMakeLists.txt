set(headers
    accessors/globalaccessors.h
    accessors/settingsaccessors.h
    accessors/wifiaccessors.h
    actions/assertaction.h
    actions/bluetoothbeginaction.h
    actions/bluetoothbeginmasteraction.h
    actions/bluetoothconnectbmsaction.h
    actions/bluetoothdisconnectaction.h
    actions/bluetoothendaction.h
    actions/bluetoothflushaction.h
    actions/bmsturnoffchargeaction.h
    actions/bmsturnoffdischargeaction.h
    actions/bmsturnonchargeaction.h
    actions/bmsturnondischargeaction.h
    actions/dividebyzeroaction.h
    actions/erasenvsaction.h
    actions/ledstripanimationactions.h
    actions/ledstripblinkactions.h
    actions/loadsettingsaction.h
    actions/modesettingsaction.h
    actions/multiaction.h
    actions/qraction.h
    actions/rebootaction.h
    actions/savesettingsaction.h
    actions/switchprofileaction.h
    actions/tempomatmodeapplycurrentpeedaction.h
    actions/updateswapfrontbackaction.h
    actions/wifiscanaction.h
    battery.h
    ble_bobby.h
    bletexthelpers.h
    bluetooth_bobby.h
    bluetoothmode.h
    bluetoothtexthelpers.h
    bmsutils.h
    buildserver.h
    buttons.h
    can.h
    changevaluedisplay_bluetoothmode.h
    changevaluedisplay_controlmode.h
    changevaluedisplay_controltype.h
    changevaluedisplay_handbremsmode.h
    changevaluedisplay_larsmmode_mode.h
    changevaluedisplay_unifiedmodelmode.h
    changevaluedisplay_wifi_mode_t.h
    changevaluedisplay_wifi_power_t.h
    cloud.h
    cloudtexthelpers.h
    controller.h
    debugcolorhelpers.h
    debuginputhandler.h
    debugtexthelpers.h
    displays/bmsdisplay.h
    displays/bobbydisplay.h
    displays/bobbydisplaywithtitle.h
    displays/bobbychangevaluedisplay.h
    displays/bobbymenudisplay.h
    displays/calibratedisplay.h
    displays/calibratevoltagedisplay.h
    displays/qrdisplay.h
    displays/dpad5wire2outdebugdisplay.h
    displays/dpad5wiredebugdisplay.h
    displays/dpad6wiredebugdisplay.h
    displays/gameoflifedisplay.h
    displays/gametrakcalibratedisplay.h
    displays/garagedisplay.h
    displays/ledstripcolorsdisplay.h
    displays/lockscreen.h
    displays/menus/aboutmenu.h
    displays/menus/accesspointwifisettingsmenu.h
    displays/menus/batterydebugmenu.h
    displays/menus/batterymenu.h
    displays/menus/blesettingsmenu.h
    displays/menus/bluetoothsettingsmenu.h
    displays/menus/bmsmenu.h
    displays/menus/boardcomputerhardwaresettingsmenu.h
    displays/menus/buzzermenu.h
    displays/menus/cloudsettingsmenu.h
    displays/menus/commanddebugmenu.h
    displays/menus/controllerhardwaresettingsmenu.h
    displays/menus/crashmenu.h
    displays/menus/debugmenu.h
    displays/menus/defaultmodesettingsmenu.h
    displays/menus/demosmenu.h
    displays/menus/dynamicdebugmenu.h
    displays/menus/enablemenu.h
    displays/menus/espnowmenu.h
    displays/menus/espnowsettingsmenu.h
    displays/menus/feedbackdebugmenu.h
    displays/menus/gametrakmodesettingsmenu.h
    displays/menus/genericwifisettingsmenu.h
    displays/menus/graphsmenu.h
    displays/menus/greenpassmenu.h
    displays/menus/handbremssettingsmenu.h
    displays/menus/invertmenu.h
    displays/menus/larsmmodesettingsmenu.h
    displays/menus/ledstripmenu.h
    displays/menus/ledstripselectanimationmenu.h
    displays/menus/ledstripselectblinkmenu.h
    displays/menus/ledstripselectotamode.h
    displays/menus/limitssettingsmenu.h
    displays/menus/lockscreensettingsmenu.h
    displays/menus/mainmenu.h
    displays/menus/modessettingsmenu.h
    displays/menus/mosfetsmenu.h
    displays/menus/motorfeedbackdebugmenu.h
    displays/menus/motorstatedebugmenu.h
    displays/menus/motortestmodesettingsmenu.h
    displays/menus/otamenu.h
    displays/menus/presetsmenu.h
    displays/menus/profilesmenu.h
    displays/menus/selectbatterytypemenu.h
    displays/menus/selectbuildserverbranch.h
    displays/menus/selectbuildservermenu.h
    displays/menus/selectmodemenu.h
    displays/menus/selectotabuildmenu.h
    displays/menus/settingsmenu.h
    displays/menus/stationwifisettingsmenu.h
    displays/menus/statisticsmenu.h
    displays/menus/taskmanagermenu.h
    displays/menus/tempomatmodesettingsmenu.h
    displays/menus/timersmenu.h
    displays/menus/timesettingsmenu.h
    displays/menus/udpcloudsettingsmenu.h
    displays/menus/wifiscanmenu.h
    displays/menus/wifisettingsmenu.h
    displays/metersdisplay.h
    displays/pingpongdisplay.h
    displays/popups/alertdisplay.h
    displays/poweroffdisplay.h
    displays/powersupplydisplay.h
    displays/qrcodedebug.h
    displays/qrimportdisplay.h
    displays/spirodisplay.h
    displays/starfielddisplay.h
    displays/statusdisplay.h
    displays/updatedisplay.h
    dnsannounce.h
    dpad.h
    dpad3wire.h
    dpad5wire.h
    dpad5wire_2out.h
    dpad6wire.h
    drivingstatistics.h
    esptexthelpers.h
    espnowfunctions.h
    feedbackparser.h
    globals.h
    handbremse.h
    icons/alert.h
    icons/battery.h
    icons/bluetooth.h
    icons/bms.h
    icons/bobbycar.h
    icons/buzzer.h
    icons/close.h
    icons/demos.h
    icons/graph.h
    icons/greenpass.h
    icons/hardware.h
    icons/info.h
    icons/lock.h
    icons/logo.h
    icons/modes.h
    icons/neopixel.h
    icons/poweroff.h
    icons/presets.h
    icons/reboot.h
    icons/scan.h
    icons/settings.h
    icons/statistics.h
    icons/time.h
    icons/update.h
    icons/wifi.h
    ledstrip.h
    ledstripdefines.h
    macros_bobbycar.h
    modeinterface.h
    modes.h
    modes/defaultmode.h
    modes/gametrakmode.h
    modes/ignoreinputmode.h
    modes/larsmmode.h
    modes/motortestmode.h
    modes/remotecontrolmode.h
    modes/tempomatmode.h
    mosfets.h
    newsettings.h
    ota.h
    potis.h
    presets.h
    qrimport.h
    rotary.h
    screens.h
    serial_bobby.h
    settings.h
    settingspersister.h
    settingsutils.h
    statistics.h
    statustexthelper.h
    stringsettings.h
    taskmanager.h
    texts.h
    time_bobbycar.h
    types.h
    udpcloud.h
    unifiedmodelmode.h
    utils.h
    webserver.h
    webserver_displaycontrol.h
    webserver_dumpnvs.h
    webserver_lock.h
    webserver_ota.h
    webserver_settings.h
    webserver_stringsettings.h
    widgets/doubleprogressbar.h
    widgets/menudisplaywithtime.h
    wifi_bobbycar.h
    wifitexthelpers.h
)

set(sources
    accessors/globalaccessors.cpp
    accessors/settingsaccessors.cpp
    accessors/wifiaccessors.cpp
    actions/assertaction.cpp
    actions/bluetoothbeginaction.cpp
    actions/bluetoothbeginmasteraction.cpp
    actions/bluetoothconnectbmsaction.cpp
    actions/bluetoothdisconnectaction.cpp
    actions/bluetoothendaction.cpp
    actions/bluetoothflushaction.cpp
    actions/bmsturnoffchargeaction.cpp
    actions/bmsturnoffdischargeaction.cpp
    actions/bmsturnonchargeaction.cpp
    actions/bmsturnondischargeaction.cpp
    actions/dividebyzeroaction.cpp
    actions/erasenvsaction.cpp
    actions/ledstripanimationactions.cpp
    actions/ledstripblinkactions.cpp
    actions/loadsettingsaction.cpp
    actions/modesettingsaction.cpp
    actions/multiaction.cpp
    actions/qraction.cpp
    actions/rebootaction.cpp
    actions/savesettingsaction.cpp
    actions/switchprofileaction.cpp
    actions/tempomatmodeapplycurrentpeedaction.cpp
    actions/updateswapfrontbackaction.cpp
    actions/wifiscanaction.cpp
    battery.cpp
    ble_bobby.cpp
    bletexthelpers.cpp
    bluetooth_bobby.cpp
    bluetoothmode.cpp
    bluetoothtexthelpers.cpp
    bmsutils.cpp
    buildserver.cpp
    buttons.cpp
    can.cpp
    changevaluedisplay_bluetoothmode.cpp
    changevaluedisplay_controlmode.cpp
    changevaluedisplay_controltype.cpp
    changevaluedisplay_handbremsmode.cpp
    changevaluedisplay_larsmmode_mode.cpp
    changevaluedisplay_unifiedmodelmode.cpp
    changevaluedisplay_wifi_mode_t.cpp
    changevaluedisplay_wifi_power_t.cpp
    cloud.cpp
    cloudtexthelpers.cpp
    controller.cpp
    debugcolorhelpers.cpp
    debuginputhandler.cpp
    debugtexthelpers.cpp
    displays/bmsdisplay.cpp
    displays/bobbydisplay.cpp
    displays/bobbydisplaywithtitle.cpp
    displays/bobbychangevaluedisplay.cpp
    displays/bobbymenudisplay.cpp
    displays/calibratedisplay.cpp
    displays/calibratevoltagedisplay.cpp
    displays/qrdisplay.cpp
    displays/dpad5wire2outdebugdisplay.cpp
    displays/dpad5wiredebugdisplay.cpp
    displays/dpad6wiredebugdisplay.cpp
    displays/gameoflifedisplay.cpp
    displays/gametrakcalibratedisplay.cpp
    displays/garagedisplay.cpp
    displays/ledstripcolorsdisplay.cpp
    displays/lockscreen.cpp
    displays/menus/aboutmenu.cpp
    displays/menus/accesspointwifisettingsmenu.cpp
    displays/menus/batterydebugmenu.cpp
    displays/menus/batterymenu.cpp
    displays/menus/blesettingsmenu.cpp
    displays/menus/bluetoothsettingsmenu.cpp
    displays/menus/bmsmenu.cpp
    displays/menus/boardcomputerhardwaresettingsmenu.cpp
    displays/menus/buzzermenu.cpp
    displays/menus/cloudsettingsmenu.cpp
    displays/menus/commanddebugmenu.cpp
    displays/menus/controllerhardwaresettingsmenu.cpp
    displays/menus/crashmenu.cpp
    displays/menus/debugmenu.cpp
    displays/menus/defaultmodesettingsmenu.cpp
    displays/menus/demosmenu.cpp
    displays/menus/dynamicdebugmenu.cpp
    displays/menus/enablemenu.cpp
    displays/menus/espnowmenu.cpp
    displays/menus/espnowsettingsmenu.cpp
    displays/menus/feedbackdebugmenu.cpp
    displays/menus/gametrakmodesettingsmenu.cpp
    displays/menus/genericwifisettingsmenu.cpp
    displays/menus/graphsmenu.cpp
    displays/menus/greenpassmenu.cpp
    displays/menus/handbremssettingsmenu.cpp
    displays/menus/invertmenu.cpp
    displays/menus/larsmmodesettingsmenu.cpp
    displays/menus/ledstripmenu.cpp
    displays/menus/ledstripselectanimationmenu.cpp
    displays/menus/ledstripselectblinkmenu.cpp
    displays/menus/ledstripselectotamode.cpp
    displays/menus/limitssettingsmenu.cpp
    displays/menus/lockscreensettingsmenu.cpp
    displays/menus/mainmenu.cpp
    displays/menus/modessettingsmenu.cpp
    displays/menus/mosfetsmenu.cpp
    displays/menus/motorfeedbackdebugmenu.cpp
    displays/menus/motorstatedebugmenu.cpp
    displays/menus/motortestmodesettingsmenu.cpp
    displays/menus/otamenu.cpp
    displays/menus/presetsmenu.cpp
    displays/menus/profilesmenu.cpp
    displays/menus/selectbatterytypemenu.cpp
    displays/menus/selectbuildserverbranch.cpp
    displays/menus/selectbuildservermenu.cpp
    displays/menus/selectmodemenu.cpp
    displays/menus/selectotabuildmenu.cpp
    displays/menus/settingsmenu.cpp
    displays/menus/stationwifisettingsmenu.cpp
    displays/menus/statisticsmenu.cpp
    displays/menus/taskmanagermenu.cpp
    displays/menus/tempomatmodesettingsmenu.cpp
    displays/menus/timersmenu.cpp
    displays/menus/timesettingsmenu.cpp
    displays/menus/udpcloudsettingsmenu.cpp
    displays/menus/wifiscanmenu.cpp
    displays/menus/wifisettingsmenu.cpp
    displays/metersdisplay.cpp
    displays/pingpongdisplay.cpp
    displays/popups/alertdisplay.cpp
    displays/poweroffdisplay.cpp
    displays/powersupplydisplay.cpp
    displays/qrcodedebug.cpp
    displays/qrimportdisplay.cpp
    displays/spirodisplay.cpp
    displays/starfielddisplay.cpp
    displays/statusdisplay.cpp
    displays/updatedisplay.cpp
    dnsannounce.cpp
    dpad.cpp
    dpad3wire.cpp
    dpad5wire.cpp
    dpad5wire_2out.cpp
    dpad6wire.cpp
    drivingstatistics.cpp
    esptexthelpers.cpp
    espnowfunctions.cpp
    feedbackparser.cpp
    globals.cpp
    handbremse.cpp
    icons/alert.cpp
    icons/battery.cpp
    icons/bluetooth.cpp
    icons/bms.cpp
    icons/bobbycar.cpp
    icons/buzzer.cpp
    icons/close.cpp
    icons/demos.cpp
    icons/graph.cpp
    icons/greenpass.cpp
    icons/hardware.cpp
    icons/info.cpp
    icons/lock.cpp
    icons/logo.cpp
    icons/modes.cpp
    icons/neopixel.cpp
    icons/poweroff.cpp
    icons/presets.cpp
    icons/reboot.cpp
    icons/scan.cpp
    icons/settings.cpp
    icons/statistics.cpp
    icons/time.cpp
    icons/update.cpp
    icons/wifi.cpp
    ledstrip.cpp
    ledstripdefines.cpp
    macros_bobbycar.cpp
    main.cpp
    modeinterface.cpp
    modes.cpp
    modes/defaultmode.cpp
    modes/gametrakmode.cpp
    modes/ignoreinputmode.cpp
    modes/larsmmode.cpp
    modes/motortestmode.cpp
    modes/remotecontrolmode.cpp
    modes/tempomatmode.cpp
    mosfets.cpp
    newsettings.cpp
    ota.cpp
    potis.cpp
    presets.cpp
    qrimport.cpp
    rotary.cpp
    screens.cpp
    serial_bobby.cpp
    settings.cpp
    settingspersister.cpp
    settingsutils.cpp
    statistics.cpp
    statustexthelper.cpp
    stringsettings.cpp
    taskmanager.cpp
    texts.cpp
    time_bobbycar.cpp
    types.cpp
    udpcloud.cpp
    unifiedmodelmode.cpp
    utils.cpp
    webserver.cpp
    webserver_displaycontrol.cpp
    webserver_dumpnvs.cpp
    webserver_lock.cpp
    webserver_ota.cpp
    webserver_settings.cpp
    webserver_stringsettings.cpp
    widgets/doubleprogressbar.cpp
    widgets/menudisplaywithtime.cpp
    wifi_bobbycar.cpp
    wifitexthelpers.cpp
)

set(dependencies
    freertos nvs_flash esp_http_server esp_https_ota mdns app_update esp_system esp_websocket_client driver
    arduino-esp32 ArduinoJson esp-nimble-cpp FastLED-idf TFT_eSPI QRCode-esp32
    bobbycar-protocol cpputils cxx-ring-buffer date
    espasynchttpreq espasyncota espchrono espcpputils espconfiglib esp-gui-lib esphttpdutils espwifistack expected fmt
)

idf_component_register(
    SRCS
        ${headers}
        ${sources}
    INCLUDE_DIRS
        .
    REQUIRES
        ${dependencies}
)

target_compile_options(${COMPONENT_TARGET}
    PRIVATE
        -fstack-reuse=all
        -fstack-protector-all
        -fdiagnostics-color=always
        -Wno-unused-function
        -Wno-deprecated-declarations
        -Wno-missing-field-initializers
        -Wno-parentheses
        ${BOBBYCAR_BUILDFLAGS}
)
